<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <script src="{% static "jquery-1.11.2.js" %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static "main.css" %}"/>
  </head>

  <body>
        <div id="machines" class="out">
        </div>
  </body>

  <script>
  window.onload=function()
  {
    var machines = document.getElementById('machines');
    var i=1;
      {% for machine in machines %}
      //div for machine overall
      var machine = document.createElement("div");
      var name = "machine"+i;
      machine.setAttribute("id", "machine"+i);

      //image for machine
      var machine_picture = document.createElement("img")

      //Check threat level and match it with the right image
      if({{machine.number_of_threats}} == 0)
      {
        machine_picture.setAttribute("src", "{% static "green-square" %}");
      }

      if({{machine.number_of_threats}} == 1)
      {
        machine_picture.setAttribute("src", "{% static "yellow-square" %}");
      }

      if({{machine.number_of_threats}} == 2)
      {
        machine_picture.setAttribute("src", "{% static "orange-square" %}");
      }

      if({{machine.number_of_threats}} == 3)
      {
        machine_picture.setAttribute("src", "{% static "red-square" %}");
      }
      machine_picture.setAttribute("height", "100");
      machine_picture.setAttribute("width", "60");
      machine_picture.setAttribute("onclick" , "hideDescription(" + i + ")");

      //div for machine info
      var machine_info = document.createElement("div");
      machine_info.setAttribute("id", "machine_info"+i);
      machine_info.innerHTML="{{machine.name}}\n{{machine.ip}}";

      //Append machine info and image to a machine
      machine.appendChild(machine_picture);
      machine.appendChild(machine_info);
      //Append machine to machines
      machines.appendChild(machine);
      i++;
      {%endfor%}

  }

  </script>
  <script type="text/javascript">
  function hideDescription(computerID){
    var DescriptionElement = "#machine_info" +computerID;
    $(DescriptionElement).toggleClass("hidden");
  }
  </script

</html>
